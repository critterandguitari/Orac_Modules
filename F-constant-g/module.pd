#N canvas 311 76 1405 714 10;
#X obj 304 186 r notesIn-\$1;
#X obj 336 371 s notesOut-\$1;
#X obj 23 9 r loaddefs-\$1;
#X msg 23 76 loaddefinitions \$1;
#X obj 181 9 r loadbang-\$1;
#X obj 181 76 print loading definiton for \$1;
#X obj 23 41 symbol;
#X obj 47 186 inlet~ inL-\$1;
#X obj 147 186 inlet~ inR-\$1;
#X obj 47 461 outlet~ outL-\$1;
#X obj 206 461 outlet~ outR-\$1;
#X obj 304 228 t a a;
#X obj 181 35 print loaded:constant-g into \$1;
#X obj 24 112 KontrolModule \$1 F-constant-g;
#N canvas 103 50 1730 937 sound-- 0;
#N canvas 282 50 572 297 phase-tables 0;
#X obj 50 108 array define prev-real1-\$1 4096;
#X obj 51 138 array define prev-imag1-\$1 4096;
#X restore 20 103 pd phase-tables;
#N canvas 22 52 1127 584 hann-window 0;
#N canvas 5 50 450 300 (subpatch) 0;
#X array \$0-hann 1024 float 0;
#X coords 0 1 1023 0 300 100 1 0 0;
#X restore 82 311 graph;
#X obj 378 165 osc~;
#X obj 378 190 *~ -0.5;
#X obj 378 214 +~ 0.5;
#X obj 38 173 /;
#X obj 127 142 samplerate~;
#X obj 177 204 swap;
#X obj 177 228 /;
#X obj 49 201 * 1000;
#X obj 38 115 t f b f;
#X msg 173 92 resize \$1;
#X obj 173 116 s \$0-hann;
#X msg 382 130 0;
#X obj 330 131 t f b;
#X text 18 10 calculate Hann window table (variable window size) and
constants window-hz (fundamental frequency of analysis) \, window-sec
and window-msec (analysis window size in seconds and msec).;
#X obj 330 105 r window-hz-\$1;
#X obj 49 228 s window-msec-\$1;
#X obj 38 250 s window-sec-\$1;
#X obj 177 252 s window-hz-\$1;
#X obj 334 245 tabwrite~ \$0-hann;
#X obj 38 80 r window-size-\$1;
#X connect 1 0 2 0;
#X connect 2 0 3 0;
#X connect 3 0 19 0;
#X connect 4 0 8 0;
#X connect 4 0 17 0;
#X connect 5 0 4 1;
#X connect 5 0 6 1;
#X connect 6 0 7 0;
#X connect 6 1 7 1;
#X connect 7 0 18 0;
#X connect 8 0 16 0;
#X connect 9 0 4 0;
#X connect 9 0 6 0;
#X connect 9 1 5 0;
#X connect 9 2 10 0;
#X connect 10 0 11 0;
#X connect 12 0 1 1;
#X connect 13 0 1 0;
#X connect 13 1 12 0;
#X connect 13 1 19 0;
#X connect 15 0 13 0;
#X connect 20 0 9 0;
#X restore 20 127 pd hann-window;
#X obj 1055 304 stripnote;
#N canvas 17 50 673 407 pvoc-info 0;
#X text 37 61 This patch takes a sound \, analyzes windows in it both
for channel magnitude and for phase precession in each channel (compared
to another operlapping window). The real-time output recreates the
same magnitudes and phase precession \, althought the phases themselves
are in general different. You can control either the location or its
motion (setting location stops motion \, while setting a non-zero motion
causes the location to change automatically). "Rewind" goes back to
the beginning. You can use different window sizes (use the message
boxes - the number box is for readout). The "lock" feature forces phase
coherency between neighboring channels \, which makes a more present
sound but can add artifacts to the sound. Look in "pd fft-analysis"
to see the workings.;
#X text 117 33 PHASE VOCODER FOR TIME STRETCHING AND CONTRACTION;
#X text 125 242 updated for Pd version 0.44;
#X restore 20 77 pd pvoc-info;
#N canvas 22 50 1306 787 fft-analysis1 0;
#X obj 51 477 *~;
#X obj 18 477 *~;
#X obj 18 499 -~;
#X obj 167 475 *~;
#X obj 136 475 *~;
#X obj 136 497 +~;
#X obj 109 193 *~;
#X obj 78 193 *~;
#X obj 50 193 *~;
#X obj 19 193 *~;
#X obj 19 218 +~;
#X obj 127 379 *~;
#X obj 20 622 *~;
#X obj 238 430 rfft~;
#X obj 108 161 rfft~;
#X obj 19 564 rifft~;
#X obj 19 727 outlet~;
#X obj 97 379 *~;
#X obj 97 401 +~;
#X obj 124 218 -~;
#X obj 18 431 *~;
#X obj 51 432 *~;
#X obj 19 349 +~ 1e-15;
#X obj 19 598 *~;
#X obj 127 643 expr 2/(3*$f1);
#X obj 97 425 q8_rsqrt~;
#N canvas 96 50 1645 873 read-windows 0;
#X obj 18 803 *~;
#X obj 34 164 f;
#X obj 1238 650 /;
#X obj 195 805 *~;
#X obj -1 106 bang~;
#X obj 1237 677 * 1000;
#X obj 76 166 +;
#X obj 156 136 *;
#X obj 56 242 / 1000;
#X obj 34 265 *;
#X text 66 265 reading location (samples);
#X obj 51 597 / 4;
#X obj 156 106 * 0.01;
#X obj 1071 196 *;
#X obj 1201 90 * 0.01;
#X obj 1203 111 + 69;
#X obj 1204 132 mtof;
#X obj 1204 154 / 440;
#X obj 1092 165 t b f;
#X obj 19 849 outlet~;
#X obj 195 850 outlet~;
#X msg 953 399 0;
#X msg 918 522 set \$1;
#X text 1182 553 stretched window size (samples);
#X msg 1027 523 set \$1;
#X msg 976 268 set \$1;
#X obj 958 130 t b f;
#X obj 976 247 f;
#X obj 904 161 int;
#X obj 904 193 sel 0;
#X msg 963 164 1;
#X msg 963 187 0;
#X obj 904 218 del 300;
#X floatatom 1246 700 5 0 0 0 - - -, f 5;
#X obj 1237 628 t f b;
#X obj 1277 652 samplerate~;
#X obj 1237 721 / 4;
#X obj 71 291 / 2;
#X obj 34 291 -;
#X text 107 288 back up 1/2 window;
#X obj 16 597 -~;
#X text 43 6 Read two windows out of the recorded sample \, one 1/4
ahead of the other. The mid point of the front window is specified
by "location". If "speed" is nonzero \, "location" automatically precesses.
;
#X obj 1318 416 * -0.5;
#X text 81 601 "back" window 1/4 cycle behind "front" one;
#X text 1272 718 computation period (msec) for overlap of 4;
#X text 1299 699 msec in a window;
#X obj 1318 362 /;
#X obj 1318 387 * 1000;
#X obj 1318 338 t f b;
#X obj 1358 362 samplerate~;
#X obj 1318 315 f;
#X text 611 31 if location changes \, update number box;
#X text 760 40 in main window via "location-set" \, but;
#X text 763 59 taking care to limit frequency of updates.;
#X text 906 452 reflect control changes;
#X text 906 469 in main window.;
#X text 904 334 setting location by hand;
#X text 902 352 sets speed to zero.;
#X text 910 643 misc controls;
#X text 1286 223 "rewind" control takes us;
#X text 1289 241 to a location depending on;
#X text 1289 260 stretched window size.;
#X obj 16 469 f;
#X obj 17 496 pack;
#X obj 406 98 sel 0 1, f 16;
#X msg 509 155 1;
#X obj 289 275 f;
#X obj 95 136 f;
#X obj 477 128 t b b;
#X msg 470 162 bang;
#X msg 408 132 0;
#X obj -1 133 spigot 0;
#X msg 17 523 0 0 \, \$1 \$2 0;
#X obj 17 551 vline~;
#X obj 465 658 / 4;
#X obj 430 658 -~;
#X text 495 662 "back" window 1/4 cycle behind "front" one;
#X obj 430 530 f;
#X obj 431 557 pack;
#X msg 431 584 0 0 \, \$1 \$2 0;
#X obj 431 612 vline~;
#X obj 1070 224 s \$0-2-window;
#X obj 459 299 f;
#X obj 424 241 bang~;
#X obj 501 301 +;
#X obj 581 271 *;
#X obj 481 367 / 1000;
#X obj 459 390 *;
#X text 491 390 reading location (samples);
#X obj 581 241 * 0.01;
#X obj 496 416 / 2;
#X obj 459 416 -;
#X text 532 413 back up 1/2 window;
#X obj 493 263 f;
#X obj 424 268 spigot 0;
#X obj 664 128 sel 0 1, f 16;
#X msg 767 185 1;
#X obj 767 241 f;
#X obj 735 158 t b b;
#X msg 728 192 bang;
#X msg 666 162 0;
#X msg 1394 160 set \$1;
#X obj 1376 22 t b f;
#X obj 1394 139 f;
#X obj 1322 53 int;
#X obj 1322 85 sel 0;
#X msg 1381 56 1;
#X msg 1381 79 0;
#X obj 1322 110 del 300;
#X msg 1074 400 0;
#X obj 482 627 r \$0-2-window;
#X obj 1487 422 * -0.5;
#X obj 1487 368 /;
#X obj 1487 393 * 1000;
#X obj 1487 344 t f b;
#X obj 1527 368 samplerate~;
#X obj 1487 321 f;
#X obj 195 827 *~ 0.5;
#X obj 18 825 *~ 0.5;
#X obj 156 83 r speed1-\$1;
#X obj 95 61 r location1-\$1;
#X obj 223 478 r fft1-point-\$1;
#X obj 918 498 r speed1-\$1;
#X obj 1027 496 r transpo-\$1;
#X obj 1027 548 s transpo-set-\$1;
#X obj 918 547 s speed-set-\$1;
#X obj 1074 423 s speed2-\$1;
#X obj 953 422 s speed1-\$1;
#X obj 953 376 r location1-\$1;
#X obj 1074 377 r location2-\$1;
#X obj 1071 120 r window-size-\$1;
#X obj 1201 68 r transpo-\$1;
#X obj 1385 -2 r see-loc2-\$1;
#X obj 1376 -24 r location2-\$1;
#X obj 1394 184 s location-set2-\$1;
#X obj 1318 282 r rewind-\$1;
#X msg 1318 510 \; location1-\$2 \$1;
#X msg 1487 516 \; location2-\$2 \$1;
#X obj 1487 288 r rewind-\$1;
#X obj 1237 604 r window-size-\$1;
#X obj 880 675 r no-detune-\$1;
#X obj 1026 614 r auto-\$1;
#X msg 1026 742 \; rewind-\$2 bang \; speed-\$2 \$1;
#X msg 880 727 \; transpo-\$1 0;
#X obj 670 431 r fft2-point-\$1;
#X obj 480 198 r location2-\$1;
#X obj 581 218 r speed2-\$1;
#X obj 676 101 r fft2-start-\$1;
#X obj 564 105 r speed-\$1;
#X obj 578 139 s speed2-\$1;
#X obj 554 161 s speed1-\$1;
#X obj 406 73 r fft1-start-\$1;
#X obj 501 323 s see-loc2-\$1;
#X obj 976 292 s location-set-\$1;
#X obj 967 106 r see-loc-\$1;
#X obj 958 84 r location1-\$1;
#X obj 880 697 symbol \$1;
#X obj 1026 696 pack 0 s;
#X obj 1026 636 t a b;
#X obj 1053 663 symbol \$1;
#X obj 76 189 s see-loc-\$1;
#X obj 1386 438 symbol \$1;
#X obj 1319 439 t a b;
#X obj 1319 478 pack 0 s;
#X obj 1547 448 symbol \$1;
#X obj 1482 456 t a b;
#X obj 1487 484 pack 0 s;
#X obj 56 217 r \$0-insamprate;
#X obj 245 89 r \$0-window-size4;
#X obj 48 436 r \$0-2-window;
#X obj 49 477 r \$0-window-size4;
#X obj 196 636 tabread4~ \$0-sample1;
#X obj 18 636 tabread4~ \$0-sample1;
#X obj 238 697 tabreceive~ \$0-hann;
#X obj 431 697 tabread4~ \$0-sample1;
#X obj 608 698 tabread4~ \$0-sample1;
#X obj 480 525 r \$0-window-size4;
#X obj 467 501 r \$0-2-window;
#X obj 459 438 s \$0-tabread-right2;
#X obj 604 364 r \$0-2-window;
#X obj 481 344 r \$0-insamprate;
#X obj 632 281 r \$0-window-size4;
#X obj 1238 743 s \$0-window-size4;
#X obj 1371 308 r \$0-2-window;
#X obj 1483 264 r \$0-2-window;
#X obj 228 533 pack 0 \$0;
#X msg 228 565 set \$2-sample\$1;
#X msg 655 544 set \$2-sample\$1;
#X obj 655 514 pack 0 \$0;
#X obj 179 239 r \$0-2-window;
#X obj 34 326 s \$0-tabread-right;
#X obj 69 552 r \$0-2-window;
#X obj 79 407 t b f, f 15;
#X obj 588 491 t b f;
#X connect 0 0 118 0;
#X connect 1 0 6 0;
#X connect 1 0 9 0;
#X connect 2 0 5 0;
#X connect 3 0 117 0;
#X connect 4 0 71 0;
#X connect 5 0 33 0;
#X connect 5 0 36 0;
#X connect 6 0 1 1;
#X connect 6 0 160 0;
#X connect 7 0 6 1;
#X connect 8 0 9 1;
#X connect 9 0 38 0;
#X connect 11 0 40 1;
#X connect 12 0 7 0;
#X connect 13 0 81 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 16 0 17 0;
#X connect 17 0 18 0;
#X connect 18 0 13 0;
#X connect 18 1 13 1;
#X connect 21 0 127 0;
#X connect 22 0 125 0;
#X connect 24 0 124 0;
#X connect 25 0 153 0;
#X connect 26 0 28 0;
#X connect 26 1 27 1;
#X connect 27 0 25 0;
#X connect 28 0 29 0;
#X connect 29 0 30 0;
#X connect 29 0 32 0;
#X connect 30 0 28 1;
#X connect 31 0 28 1;
#X connect 32 0 31 0;
#X connect 32 0 27 0;
#X connect 34 0 2 0;
#X connect 34 1 35 0;
#X connect 35 0 2 1;
#X connect 36 0 182 0;
#X connect 37 0 38 1;
#X connect 38 0 190 0;
#X connect 38 0 192 0;
#X connect 40 0 172 0;
#X connect 42 0 162 0;
#X connect 46 0 47 0;
#X connect 47 0 42 0;
#X connect 48 0 46 0;
#X connect 48 1 49 0;
#X connect 49 0 46 1;
#X connect 50 0 48 0;
#X connect 62 0 63 0;
#X connect 63 0 72 0;
#X connect 64 0 70 0;
#X connect 64 1 68 0;
#X connect 65 0 66 0;
#X connect 66 0 71 1;
#X connect 67 0 1 1;
#X connect 68 0 69 0;
#X connect 68 1 65 0;
#X connect 69 0 67 0;
#X connect 70 0 66 0;
#X connect 71 0 1 0;
#X connect 72 0 73 0;
#X connect 73 0 40 0;
#X connect 73 0 171 0;
#X connect 74 0 75 1;
#X connect 75 0 174 0;
#X connect 77 0 78 0;
#X connect 78 0 79 0;
#X connect 79 0 80 0;
#X connect 80 0 75 0;
#X connect 80 0 175 0;
#X connect 82 0 84 0;
#X connect 82 0 87 0;
#X connect 83 0 94 0;
#X connect 84 0 82 1;
#X connect 84 0 152 0;
#X connect 85 0 84 1;
#X connect 86 0 87 1;
#X connect 87 0 91 0;
#X connect 89 0 85 0;
#X connect 90 0 91 1;
#X connect 91 0 178 0;
#X connect 91 0 193 0;
#X connect 93 0 82 1;
#X connect 94 0 82 0;
#X connect 95 0 100 0;
#X connect 95 1 98 0;
#X connect 96 0 97 0;
#X connect 97 0 94 1;
#X connect 98 0 99 0;
#X connect 98 1 96 0;
#X connect 99 0 93 0;
#X connect 100 0 97 0;
#X connect 101 0 134 0;
#X connect 102 0 104 0;
#X connect 102 1 103 1;
#X connect 103 0 101 0;
#X connect 104 0 105 0;
#X connect 105 0 106 0;
#X connect 105 0 108 0;
#X connect 106 0 104 1;
#X connect 107 0 104 1;
#X connect 108 0 107 0;
#X connect 108 0 103 0;
#X connect 109 0 126 0;
#X connect 110 0 74 0;
#X connect 111 0 165 0;
#X connect 112 0 113 0;
#X connect 113 0 111 0;
#X connect 114 0 112 0;
#X connect 114 1 115 0;
#X connect 115 0 112 1;
#X connect 116 0 114 0;
#X connect 117 0 20 0;
#X connect 118 0 19 0;
#X connect 119 0 12 0;
#X connect 120 0 67 0;
#X connect 121 0 185 0;
#X connect 122 0 22 0;
#X connect 123 0 24 0;
#X connect 128 0 21 0;
#X connect 129 0 109 0;
#X connect 130 0 13 0;
#X connect 131 0 14 0;
#X connect 132 0 102 0;
#X connect 133 0 102 0;
#X connect 135 0 50 0;
#X connect 138 0 116 0;
#X connect 139 0 34 0;
#X connect 140 0 156 0;
#X connect 141 0 158 0;
#X connect 144 0 188 0;
#X connect 145 0 93 0;
#X connect 146 0 89 0;
#X connect 147 0 95 0;
#X connect 148 0 149 0;
#X connect 148 0 150 0;
#X connect 151 0 64 0;
#X connect 154 0 26 0;
#X connect 155 0 26 0;
#X connect 156 0 143 0;
#X connect 157 0 142 0;
#X connect 158 0 157 0;
#X connect 158 1 159 0;
#X connect 159 0 157 1;
#X connect 161 0 163 1;
#X connect 162 0 163 0;
#X connect 162 1 161 0;
#X connect 163 0 136 0;
#X connect 164 0 166 1;
#X connect 165 0 166 0;
#X connect 165 1 164 0;
#X connect 166 0 137 0;
#X connect 167 0 8 0;
#X connect 168 0 7 1;
#X connect 169 0 62 1;
#X connect 170 0 63 1;
#X connect 171 0 3 0;
#X connect 172 0 0 0;
#X connect 173 0 3 1;
#X connect 173 0 0 1;
#X connect 174 0 0 0;
#X connect 175 0 3 0;
#X connect 176 0 78 1;
#X connect 177 0 77 1;
#X connect 179 0 90 0;
#X connect 180 0 86 0;
#X connect 181 0 85 1;
#X connect 183 0 50 1;
#X connect 184 0 116 1;
#X connect 185 0 186 0;
#X connect 186 0 171 0;
#X connect 186 0 172 0;
#X connect 187 0 174 0;
#X connect 187 0 175 0;
#X connect 188 0 187 0;
#X connect 189 0 37 0;
#X connect 191 0 11 0;
#X connect 192 0 62 0;
#X connect 192 1 172 1;
#X connect 192 1 171 1;
#X connect 193 0 77 0;
#X connect 193 1 174 1;
#X connect 193 1 175 1;
#X restore 109 133 pd read-windows;
#X text 272 5 recall previous output amplitude. Its phase will be added
to the phase difference we measure from two windows in the the recorded
sound.;
#X obj 121 69 *~;
#X obj 89 69 *~;
#X obj 89 91 +~;
#X obj 159 94 q8_rsqrt~;
#X obj 159 71 +~ 1e-20;
#X obj 73 119 *~;
#X obj 19 118 *~;
#X obj 29 245 lrshift~ 1;
#X obj 24 269 lrshift~ -1;
#X obj 141 245 lrshift~ 1;
#X obj 133 269 lrshift~ -1;
#X obj 19 325 +~;
#X obj 125 331 +~;
#X text 247 66 divide by the magnitude to make a unit-magnitude complex
amplitude (phase only). The 1e-20 is to prevent overflows. q8_rsqrt~
is reciprocal square root.;
#X text 247 165 Take FT of the window in back. Multiply its conjugate
by the normalized previous output. The result has the magnitude of
the input sound and phase (previous output phase) minus (back window
phase).;
#X text 249 370 Normalize again \, this time taking care to salt each
channel with 1e-15 so that we get a unit complex number even if everything
was zero heretofore.;
#X text 288 427 Now take the FT of the forward window and multiply
it by the unit complex number from above. The magnitude will be that
of the forward window and the phase will be the previous output phase
plus the phase difference between the two analysis windows -- except
that if "lock" is on \, they will be modified to agree progressively
better with the inter-channel phase relationships of the input.;
#X text 249 242 If "lock" is on \, encourage neighboring channels to
stay in phase by adding the two neighboring complex amplitudes. The
result will tend toward the channel with the strongest amplitude. If
the phase relationships between channels in the output and those in
the input are in parallel \, then neighboring channels of the quotient
will all have the same phase and this will not change any phases. (lrshift
shifts the signal to the left or right depending on its argument.)
;
#X text 259 126 Read two windows \, one 1/4 length behind the other
\, of the input sound \, with Hann window function (see inside).;
#X obj 20 663 hip~ 5;
#X obj 20 685 lop~ 9000;
#X obj 745 621 samplerate~;
#X obj 745 586 bang;
#X obj 21 7 tabreceive~ prev-real1-\$1;
#X obj 73 29 tabreceive~ prev-imag1-\$1;
#X obj 137 543 tabsend~ prev-imag1-\$1;
#X obj 136 567 tabsend~ prev-real1-\$1;
#X obj 127 622 r window-size-\$1;
#X msg 567 598 \; pd dsp 1 \; window-size-\$1 1024 \; transpo-\$1 0
\; lock-\$1 1 \; rewind-\$1 bang \; speed-\$1 100 \;;
#X obj 177 289 r lock-\$1;
#X obj 567 551 r loadbang-\$1;
#X obj 567 573 symbol \$1;
#X obj 745 556 r loadbang-\$1;
#X obj 159 312 *~ 1;
#X obj 35 300 *~ 1;
#X obj 52 594 tabreceive~ \$0-hann;
#X obj 745 645 s \$0-insamprate;
#X obj 355 636 block~ 1024 4 1;
#X connect 0 0 2 1;
#X connect 1 0 2 0;
#X connect 2 0 15 0;
#X connect 2 0 54 0;
#X connect 3 0 5 1;
#X connect 4 0 5 0;
#X connect 5 0 15 1;
#X connect 5 0 53 0;
#X connect 6 0 19 1;
#X connect 7 0 19 0;
#X connect 8 0 10 1;
#X connect 9 0 10 0;
#X connect 10 0 36 0;
#X connect 10 0 35 0;
#X connect 10 0 39 0;
#X connect 11 0 18 1;
#X connect 12 0 47 0;
#X connect 13 0 1 1;
#X connect 13 0 3 1;
#X connect 13 1 0 1;
#X connect 13 1 4 1;
#X connect 14 0 9 1;
#X connect 14 0 7 1;
#X connect 14 1 6 1;
#X connect 14 1 8 1;
#X connect 15 0 23 0;
#X connect 17 0 18 0;
#X connect 18 0 25 0;
#X connect 19 0 37 0;
#X connect 19 0 38 0;
#X connect 19 0 40 0;
#X connect 20 0 1 0;
#X connect 20 0 4 0;
#X connect 21 0 0 0;
#X connect 21 0 3 0;
#X connect 22 0 17 1;
#X connect 22 0 17 0;
#X connect 22 0 20 0;
#X connect 23 0 12 0;
#X connect 24 0 12 1;
#X connect 25 0 20 1;
#X connect 25 0 21 1;
#X connect 26 0 14 0;
#X connect 26 1 13 0;
#X connect 28 0 30 1;
#X connect 29 0 30 0;
#X connect 30 0 32 0;
#X connect 31 0 33 1;
#X connect 31 0 34 1;
#X connect 32 0 31 0;
#X connect 33 0 8 0;
#X connect 33 0 7 0;
#X connect 34 0 9 0;
#X connect 34 0 6 0;
#X connect 35 0 62 0;
#X connect 36 0 62 0;
#X connect 37 0 61 0;
#X connect 38 0 61 0;
#X connect 39 0 22 0;
#X connect 40 0 11 0;
#X connect 40 0 11 1;
#X connect 40 0 21 0;
#X connect 47 0 48 0;
#X connect 48 0 16 0;
#X connect 49 0 64 0;
#X connect 50 0 49 0;
#X connect 51 0 29 1;
#X connect 51 0 29 0;
#X connect 51 0 34 0;
#X connect 52 0 28 1;
#X connect 52 0 28 0;
#X connect 52 0 33 0;
#X connect 55 0 24 0;
#X connect 57 0 61 1;
#X connect 57 0 62 1;
#X connect 58 0 59 0;
#X connect 59 0 56 0;
#X connect 60 0 50 0;
#X connect 61 0 40 1;
#X connect 62 0 39 1;
#X connect 63 0 23 1;
#X restore 33 191 pd fft-analysis1;
#X obj 870 622 i;
#X obj 51 342 line~;
#X obj 36 679 *~;
#X obj 51 270 sel 0 1, f 12;
#X msg 51 300 0 20;
#X obj 271 175 sel 0 1;
#X obj 271 264 s screenLine5;
#X msg 294 226 Phase Vocoder On;
#X msg 271 203 Phase Vocoder Off;
#X msg 91 300 1 10;
#X obj 32 372 *~;
#X msg 933 58 read tune.txt;
#N canvas 11 50 1264 870 print-tune 0;
#X obj 202 85 inlet;
#X obj 202 107 moses 0, f 13;
#X obj 290 142 sel 0, f 27;
#X obj 476 202 / 100;
#X obj 476 264 i;
#X obj 202 184 / 100;
#X obj 202 246 i;
#X obj 202 129 abs;
#X obj 202 301 list prepend -;
#X obj 476 334 list prepend +;
#X msg 290 164 Unison;
#X obj 476 224 + 0.499999;
#X obj 202 206 + 0.499999;
#X obj 476 504 s screenLine5;
#X obj 476 474 list prepend Interval:;
#X obj 476 291 text get tune-\$1;
#X obj 202 273 text get tune-\$1;
#X connect 0 0 1 0;
#X connect 1 0 7 0;
#X connect 1 1 2 0;
#X connect 2 0 10 0;
#X connect 2 1 3 0;
#X connect 3 0 11 0;
#X connect 4 0 15 0;
#X connect 5 0 12 0;
#X connect 6 0 16 0;
#X connect 7 0 5 0;
#X connect 8 0 14 0;
#X connect 9 0 14 0;
#X connect 10 0 14 0;
#X connect 11 0 4 0;
#X connect 12 0 6 0;
#X connect 14 0 13 0;
#X connect 15 0 9 0;
#X connect 16 0 8 0;
#X restore 986 658 pd print-tune;
#N canvas 203 50 1459 847 record-stream 0;
#X obj 323 585 *~, f 8;
#X obj 324 512 hip~ 5;
#X obj 415 46 % 2;
#X obj 415 -10 sel 1;
#X text 284 203 toggle metro;
#X obj 415 123 metro 500;
#X obj 415 21 float;
#X obj 462 21 + 1;
#X obj 415 150 float;
#X obj 472 150 + 1;
#X obj 415 175 % 4;
#X obj 375 253 sel 0 1 2 3;
#X obj 399 499 -~ 0.5;
#X obj 399 521 *~ 0.5;
#X obj 399 543 cos~;
#X obj 324 436 *~ 0.7;
#X obj 341 481 *~ 0.7;
#X obj 399 469 vline~;
#X obj 570 39 / 2;
#X msg 399 438 0 0 \, 1 \$1 0;
#X obj 399 414 f;
#X obj 659 607 *~, f 8;
#X obj 660 534 hip~ 5;
#X obj 771 516 -~ 0.5;
#X obj 771 538 *~ 0.5;
#X obj 771 560 cos~;
#X obj 660 458 *~ 0.7;
#X obj 677 503 *~ 0.7;
#X obj 771 486 vline~;
#X msg 735 460 0 0 \, 1 \$1 0;
#X obj 735 436 f;
#X msg 374 273 1;
#X msg 408 280 2;
#X msg 435 276 3;
#X msg 469 276 4;
#X text 111 24 in ms;
#X obj 63 139 i;
#X obj 55 449 outlet;
#X msg 583 245 1;
#X msg 716 237 1;
#X obj 716 206 t b b;
#X msg 865 245 1;
#X obj 865 204 t b b;
#X msg 1045 245 1;
#X obj 1045 201 t b b;
#X obj 583 204 t b b;
#X msg 260 464 start 0;
#X msg 596 486 start 0;
#X obj 659 334 t f b b f b, f 23;
#X obj 323 332 t f b b f b, f 19;
#X obj 570 61 + 0.49999;
#X obj 570 83 i;
#X obj 235 102 max 100;
#X obj 487 409 inlet~;
#X obj 584 398 inlet~;
#X obj 235 124 min 8000;
#X msg 615 228 1;
#X msg 897 230 3;
#X msg 746 230 2;
#X msg 1077 228 4;
#X obj 65 88 * 44.1;
#X obj 64 160 + 6;
#X obj 583 139 sel 0 1 2 3, f 61;
#X obj 415 197 t a a;
#X obj 65 110 * 2;
#X obj 531 619 sel 0;
#X msg 531 641 stop;
#X obj 598 -46 r loadbang-\$1;
#X obj 392 -45 r auxIn-\$1;
#X obj 477 -43 r expIn-\$1;
#X obj 326 97 s on/off-\$1;
#X obj 615 254 s fft1-point-\$1;
#X obj 583 276 s fft1-start-\$1;
#X obj 716 278 s fft2-start-\$1;
#X obj 748 253 s fft2-point-\$1;
#X obj 865 276 s fft1-start-\$1;
#X obj 897 252 s fft1-point-\$1;
#X obj 1077 252 s fft2-point-\$1;
#X obj 1045 276 s fft2-start-\$1;
#X obj 531 597 r on/off-\$1;
#X obj 428 89 s aux-led-\$1;
#X obj 235 -40 r loadbang-\$1;
#X obj 325 678 tabwrite~ \$0-sample1;
#X obj 659 680 tabwrite~ \$0-sample1;
#X obj 851 541 pack 0 \$0;
#X obj 484 534 pack 0 \$0;
#X msg 484 564 set \$2-sample\$1;
#X msg 851 571 set \$2-sample\$1;
#X obj 64 220 pack 0 \$0;
#X msg 64 268 \; \$2-sample1 resize \$1 \; \$2-sample2 resize \$1 \;
\$2-sample3 resize \$1 \; \$2-sample4 resize \$1 \;;
#X obj 48 506 array define \$0-sample1;
#X obj 48 526 array define \$0-sample2;
#X obj 49 546 array define \$0-sample3;
#X obj 49 569 array define \$0-sample4;
#X obj 417 386 r \$0-record-chunk;
#X obj 753 389 r \$0-record-chunk;
#X obj 570 16 r \$0-record-chunk;
#X obj 235 152 s \$0-record-chunk;
#X obj 55 421 r \$0-record-chunk;
#X obj 65 51 r \$0-record-chunk;
#X msg 235 -6 2000;
#X connect 0 0 82 0;
#X connect 1 0 0 0;
#X connect 2 0 5 0;
#X connect 2 0 70 0;
#X connect 2 0 80 0;
#X connect 3 0 6 0;
#X connect 5 0 8 0;
#X connect 6 0 7 0;
#X connect 6 0 2 0;
#X connect 7 0 6 1;
#X connect 8 0 9 0;
#X connect 8 0 10 0;
#X connect 9 0 8 1;
#X connect 10 0 63 0;
#X connect 11 0 31 0;
#X connect 11 1 32 0;
#X connect 11 2 33 0;
#X connect 11 3 34 0;
#X connect 12 0 13 0;
#X connect 13 0 14 0;
#X connect 14 0 0 1;
#X connect 15 0 1 0;
#X connect 16 0 1 0;
#X connect 17 0 12 0;
#X connect 18 0 50 0;
#X connect 19 0 17 0;
#X connect 20 0 19 0;
#X connect 21 0 83 0;
#X connect 22 0 21 0;
#X connect 23 0 24 0;
#X connect 24 0 25 0;
#X connect 25 0 21 1;
#X connect 26 0 22 0;
#X connect 27 0 22 0;
#X connect 28 0 23 0;
#X connect 29 0 28 0;
#X connect 30 0 29 0;
#X connect 31 0 49 0;
#X connect 32 0 48 0;
#X connect 33 0 49 0;
#X connect 34 0 48 0;
#X connect 36 0 61 0;
#X connect 38 0 72 0;
#X connect 39 0 73 0;
#X connect 40 0 39 0;
#X connect 40 1 58 0;
#X connect 41 0 75 0;
#X connect 42 0 41 0;
#X connect 42 1 57 0;
#X connect 43 0 78 0;
#X connect 44 0 43 0;
#X connect 44 1 59 0;
#X connect 45 0 38 0;
#X connect 45 1 56 0;
#X connect 46 0 82 0;
#X connect 47 0 83 0;
#X connect 48 1 47 0;
#X connect 48 2 30 0;
#X connect 48 3 84 0;
#X connect 49 1 46 0;
#X connect 49 2 20 0;
#X connect 49 3 85 0;
#X connect 50 0 51 0;
#X connect 51 0 5 1;
#X connect 52 0 55 0;
#X connect 53 0 15 0;
#X connect 53 0 26 0;
#X connect 54 0 27 0;
#X connect 54 0 16 0;
#X connect 55 0 97 0;
#X connect 56 0 71 0;
#X connect 57 0 76 0;
#X connect 58 0 74 0;
#X connect 59 0 77 0;
#X connect 60 0 64 0;
#X connect 61 0 88 0;
#X connect 62 0 45 0;
#X connect 62 1 40 0;
#X connect 62 2 42 0;
#X connect 62 3 44 0;
#X connect 63 0 11 0;
#X connect 63 1 62 0;
#X connect 64 0 36 0;
#X connect 65 0 66 0;
#X connect 66 0 82 0;
#X connect 66 0 83 0;
#X connect 67 0 6 0;
#X connect 68 0 3 0;
#X connect 79 0 65 0;
#X connect 81 0 100 0;
#X connect 84 0 87 0;
#X connect 85 0 86 0;
#X connect 86 0 82 0;
#X connect 87 0 83 0;
#X connect 88 0 89 0;
#X connect 94 0 20 1;
#X connect 95 0 30 1;
#X connect 96 0 18 0;
#X connect 98 0 37 0;
#X connect 99 0 60 0;
#X connect 100 0 52 0;
#X restore 566 244 pd record-stream;
#X obj 296 527 cg-dw, f 9;
#X text 48 46 Phase vocoder stuff;
#X text 303 778 Dry Signal In;
#X text 40 427 vocoder;
#X text 704 245 <--here is the record stream of incoming audio;
#X obj 870 546 line 1 1;
#X msg 870 503 \$1 20;
#X obj 1055 347 abs;
#X obj 1055 326 expr if ($f1 > 59 \, $f1 - 60 \, $f1 - 12);
#X obj 1055 370 % 24;
#X obj 565 186 inlet~;
#X obj 676 187 inlet~;
#X obj 665 450 s speed-\$1;
#X obj 870 776 s transpo-\$1;
#X obj 933 35 r loadbang-\$1;
#X obj 34 872 outlet~;
#X obj 1132 103 inlet notes;
#X obj 271 153 r on/off-\$1;
#X obj 296 330 r cg_dw-\$1;
#X obj 870 336 r cg_tune-\$1;
#X obj 51 243 r on/off-\$1;
#X obj 665 414 r cg_speed-\$1;
#X obj 296 372 / 100;
#X obj 933 102 text define tune-\$1;
#X obj 277 732 *~;
#X obj 362 731 *~;
#X obj 140 871 outlet~;
#X obj 870 358 / 12;
#X obj 870 573 * 1200;
#X obj 870 380 t f f;
#X obj 1032 541 i;
#X obj 1032 492 * 1200;
#X obj 1055 392 - 12;
#X obj 1055 415 / 12;
#X obj 33 213 *~ 2;
#X connect 2 0 27 0;
#X connect 4 0 53 0;
#X connect 5 0 32 0;
#X connect 6 0 15 1;
#X connect 7 0 34 0;
#X connect 7 0 45 0;
#X connect 8 0 9 0;
#X connect 8 1 14 0;
#X connect 9 0 6 0;
#X connect 10 0 13 0;
#X connect 10 1 12 0;
#X connect 12 0 11 0;
#X connect 13 0 11 0;
#X connect 14 0 6 0;
#X connect 15 0 7 0;
#X connect 16 0 42 0;
#X connect 19 0 44 1;
#X connect 19 0 43 1;
#X connect 19 1 7 1;
#X connect 24 0 47 0;
#X connect 25 0 24 0;
#X connect 26 0 28 0;
#X connect 27 0 26 0;
#X connect 28 0 51 0;
#X connect 29 0 18 0;
#X connect 29 0 43 0;
#X connect 30 0 18 1;
#X connect 30 0 44 0;
#X connect 33 0 16 0;
#X connect 35 0 2 0;
#X connect 36 0 10 0;
#X connect 37 0 41 0;
#X connect 38 0 46 0;
#X connect 39 0 8 0;
#X connect 40 0 31 0;
#X connect 41 0 19 0;
#X connect 43 0 34 0;
#X connect 44 0 45 0;
#X connect 46 0 48 0;
#X connect 47 0 5 0;
#X connect 48 0 25 0;
#X connect 48 1 50 0;
#X connect 49 0 17 0;
#X connect 50 0 49 0;
#X connect 51 0 52 0;
#X connect 52 0 25 0;
#X connect 53 0 15 0;
#X restore 48 309 pd sound-- - - - - - --;
#X connect 0 0 11 0;
#X connect 2 0 6 0;
#X connect 2 0 5 0;
#X connect 3 0 13 0;
#X connect 4 0 12 0;
#X connect 6 0 3 0;
#X connect 7 0 14 0;
#X connect 8 0 14 1;
#X connect 11 1 1 0;
#X connect 14 0 9 0;
#X connect 14 1 10 0;
